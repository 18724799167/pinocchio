# ----------------------------------------------------
# --- BENCHMARK --------------------------------------
# ----------------------------------------------------
MACRO(ADD_TEST_CFLAGS target flag)
  SET_PROPERTY(TARGET ${target} APPEND_STRING PROPERTY COMPILE_FLAGS " ${flag}")
ENDMACRO(ADD_TEST_CFLAGS)


# timings
# 
ADD_EXECUTABLE(timings timings.cpp)
PKG_CONFIG_USE_DEPENDENCY(timings eigen3)
IF(URDFDOM_FOUND)
  PKG_CONFIG_USE_DEPENDENCY(timings urdfdom)
ENDIF(URDFDOM_FOUND)
TARGET_LINK_LIBRARIES (timings ${Boost_LIBRARIES} ${PROJECT_NAME})
SET_TARGET_PROPERTIES (timings PROPERTIES COMPILE_DEFINITIONS PINOCCHIO_SOURCE_DIR="${${PROJECT_NAME}_SOURCE_DIR}")

# geomTimings
# 
IF(URDFDOM_FOUND AND HPP_FCL_FOUND)
  ADD_EXECUTABLE(geomTimings timings-geometry.cpp)
  PKG_CONFIG_USE_DEPENDENCY(geomTimings eigen3)
  PKG_CONFIG_USE_DEPENDENCY(geomTimings urdfdom)
  PKG_CONFIG_USE_DEPENDENCY(geomTimings assimp)
  PKG_CONFIG_USE_DEPENDENCY(geomTimings hpp-fcl)
  ADD_TEST_CFLAGS(geomTimings "-DWITH_HPP_FCL")
  IF(HPP_MODEL_URDF_FOUND AND BUILD_TESTS_WITH_HPP)
    PKG_CONFIG_USE_DEPENDENCY(geomTimings hpp-model-urdf)
    ADD_TEST_CFLAGS(geomTimings "-DWITH_HPP_MODEL_URDF")
  ENDIF(HPP_MODEL_URDF_FOUND AND BUILD_TESTS_WITH_HPP)
  TARGET_LINK_LIBRARIES (geomTimings ${Boost_LIBRARIES} ${PROJECT_NAME})
  SET_TARGET_PROPERTIES (geomTimings PROPERTIES COMPILE_DEFINITIONS PINOCCHIO_SOURCE_DIR="${${PROJECT_NAME}_SOURCE_DIR}")
ENDIF(URDFDOM_FOUND AND HPP_FCL_FOUND)


