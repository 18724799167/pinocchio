---
layout: default
title: footstep
---

<p>
{% highlight python %}
from pinocchio.utils import *



class FootSteps:
    def __init__(self):
        None

    def initPositions( self, right,left ):
        self.right = [ right, ]
        self.left  = [ left,  ]
        self.time  = [ 0.,    ]
        self.flyingFoot = []

    def addPhase( self, duration, foot, position = None ):
        '''
        Add a phase lasting duration where foot moves to position.
        '''
        assert( foot == 'left' or foot == 'right' or foot == 'none' )
        self.time.append( self.time[-1]+duration )
        self.right.append( self.right[-1] )
        self.left.append( self.left[-1] )
        self.flyingFoot.append(foot)
        if foot=='left':
            self.left[-1] = position
        elif foot=='right':
            self.right[-1] = position

    def getIndexFromTime(self, t):
        '''Return the index i of the interval containing t, i.e. t in time[i],time[i+1] '''
        if t>self.time[-1]: return len(self.time)-1
        return next( i for i,ti in enumerate(self.time) if ti>t ) - 1

    def getPhaseType(self, t ):
        i = self.getIndexFromTime(t)
        return self.flyingFoot[i]

    def getLeftPosition(self,t):
        i = self.getIndexFromTime(t)
        return self.left[i]

    def getRightPosition(self,t):
        i = self.getIndexFromTime(t)
        return self.right[i]

    def getLeftNextPosition(self,t):
        i = self.getIndexFromTime(t)
        i = i+1 if i+1< len(self.time) else i
        return self.left[i]

    def getRightNextPosition(self,t):
        i = self.getIndexFromTime(t)
        i = i+1 if i+1< len(self.time) else i
        return self.right[i]

    def getPhaseStart(self,t):
        i = self.getIndexFromTime(t)
        return self.time[i]
    def getPhaseDuration(self,t):
        i = self.getIndexFromTime(t)
        return self.time[i+1]-self.time[i]
    def getPhaseRemaining(self,t):
        i = self.getIndexFromTime(t)
        return self.time[i+1]-t
{% endhighlight %}
</p>